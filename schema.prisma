// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url                  = env("DATABASE_URL")
  shadowDatabaseUrl    = env("SHADOW_DATABASE_URL")
  provider             = "mysql"
  referentialIntegrity = "prisma"
}

generator client {
  provider        = "prisma-client-js"
  output          = "node_modules/.prisma/client"
  previewFeatures = ["referentialIntegrity"]
}

model User {
  id        String    @id @default(cuid())
  name      String    @default("")
  email     String    @unique @default("")
  subjectId String    @unique @default("")
  createdAt DateTime? @default(now())
  account   Account?  @relation("Account_user")
  role      String    @default("")
}

model Account {
  id            String    @id @default(cuid())
  user          User?     @relation("Account_user", fields: [userId], references: [id])
  userId        String?   @unique @map("user")
  firstName     String    @default("")
  surname       String    @default("")
  phone         String    @default("")
  students      Student[] @relation("Student_account")
  bills         Bill[]    @relation("Bill_account")
  streetAddress String    @default("")
  suburb        String    @default("")
  postcode      String    @default("")
  createdAt     DateTime? @default(now())
}

model Student {
  id          String      @id @default(cuid())
  firstName   String      @default("")
  surname     String      @default("")
  dateOfBirth DateTime?   @mysql.Date
  account     Account?    @relation("Student_account", fields: [accountId], references: [id])
  accountId   String?     @map("account")
  enrollments Enrolment[] @relation("Enrolment_student")
  createdAt   DateTime?   @default(now())

  @@index([accountId])
}

model Class {
  id                   String      @id @default(cuid())
  name                 String      @default("")
  time                 String      @default("")
  day                  String?
  minimumAge           Int?
  maximumAge           Int?
  cost                 Decimal?    @mysql.Decimal(18, 2)
  quantity             Int?
  startDate            DateTime?   @mysql.Date
  endDate              DateTime?   @mysql.Date
  type                 String?
  location             String      @default("")
  status               String?
  createdAt            DateTime?   @default(now())
  from_Enrolment_class Enrolment[] @relation("Enrolment_class")
}

model Enrolment {
  id        String    @id @default(cuid())
  class     Class?    @relation("Enrolment_class", fields: [classId], references: [id])
  classId   String?   @map("class")
  student   Student?  @relation("Enrolment_student", fields: [studentId], references: [id])
  studentId String?   @map("student")
  status    String?
  createdAt DateTime? @default(now())

  @@index([classId])
  @@index([studentId])
}

model Bill {
  id        String     @id @default(cuid())
  name      String     @default("")
  account   Account?   @relation("Bill_account", fields: [accountId], references: [id])
  accountId String?    @map("account")
  date      DateTime?  @mysql.Date
  dueDate   DateTime?  @mysql.Date
  status    String?
  items     BillItem[] @relation("BillItem_bill")
  createdAt DateTime?  @default(now())

  @@index([accountId])
}

model BillItem {
  id        String    @id @default(cuid())
  name      String    @default("")
  bill      Bill?     @relation("BillItem_bill", fields: [billId], references: [id])
  billId    String?   @map("bill")
  quantity  Int?
  amount    Decimal?  @mysql.Decimal(18, 2)
  createdAt DateTime? @default(now())

  @@index([billId])
}
